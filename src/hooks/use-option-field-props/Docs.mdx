import { Meta, Stories } from "@storybook/blocks";
import * as OptionStories from "./useOptionFieldProps.stories";

<Meta title="hooks/useOptionFieldProps" of={OptionStories} />

# useOptionFieldProps(field: OptionFieldAtom)

A special hook to be used in tandem with [useOptions](?path=/docs/hooks-useoptions--docs). It can manage a primitive field atom which will
store the currently active option.

The supported primitive field are:

```ts
type OptionFieldAtom = BooleanFieldAtom | NumberFieldAtom | StringFieldAtom;
```

For all the primitive types, it has well defined serialization & coercion to & from `HTMLInput` or `HTMLSelect` elements.
This generic behavior is allows us to build generic `<Select />` or `<RadioGroup />` components.

### Usage

```ts
import { useOptionFieldProps } from "@form-atoms/field";
```

### Example with `<select />`

```tsx
const SelectInput = <Option, Field extends OptionFieldAtom>({
  field,
  label,
  getValue,
  getLabel,
  options,
  placeholder,
}: {
  label: ReactNode;
  field: Field;
} & UseSelectOptionsProps<Option, ZodFieldValue<Field>>) => {
  const props = useOptionFieldProps(field);
  const { selectOptions } = useSelectOptions({
    field,
    getValue,
    getLabel,
    options,
    placeholder,
  });

  return (
    <div style={{ margin: "20px 0" }}>
      <FieldLabel field={field} label={label} />
      <select {...props}>{selectOptions}</select>
      <div>
        <FieldErrors field={field} />
      </div>
    </div>
  );
};

const countryOptions = [
  { name: "Slovak Republic", key: "SK" },
  { name: "Czech Republic", key: "CZ" },
];

// the active option has key of type string
const country = stringField()

<SelectInput
  field={country}
  label="Country of Origin"
  options={countryOptions}
  getValue={({ key }) => key}
  getLabel={({ name }) => name}
/>;
```

<Stories />
